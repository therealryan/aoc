use 5.014;
use strict;
use warnings;

#my $pre = reverse "1032104331202310223121231";
#my $repeat = reverse "10321043310023102121021210432002231";

my $pre = reverse "00433100331042312033100321022200433104331210200223104231003300122003031040300212102231043310433102230043310232002121042310233102121242210233102331223310203100231042310033003121242210433122321042310212102321002301123120331022200033124300043310033120331023312033122331020312233102210040312023110121002310033102321021210212102231022311032000231002312433001231203310233102231243212423122200230310222100331021212222020231023010303100331003310232000320040312130122331042212312120331000302122002331043310212122031021210233124231023310212122330002312033124331003310233122121022310203120330000302212102231101212223102231012310033120331223200212020330003012230020310200302223120031040302212100331223311123100231222312012102331102310033121031022310033100330040301032100331220012212123030031210403004331203312203100331223310033102331043210403102121222210232002031023312033120321200000432102331023310223102121223312223100230023310033002331222312033122121043300232020321003311023120231203301123124331022310033104331021210422100321223300312102331040300233124331203301012120331003312223124331222200212102230002310223104321023311023111221243310033122331112300212120220043312033100331022310223111210003212433004231022310203102321221210233104321022310433122231002212312102221211212423104121023300031000331203100303100320030310023121231002212220002301003312212102231223310033101210212310032000320223210233100220023310203102221003102123110231243210303100331013011123102321002212232122231021210422002220203210202002331023310223102331003002023101211003312033104031003311032104321";
my $repeat = reverse "00433100331042312033100321022200433104331210200223104231003300122003031040300212102231043310433102230043310232002121042310233102121242210233102331223310203100231042310033003121242210433122321042310212102321002301123120331022200033124300043310033120331023312033122331020312233102210040312023110121002310033102321021210212102231022311032000231002312433001231203310233102231243212423122200230310222100331021212222020231023010303100331003310232000320040312130122331042212312120331000302122002331043310212122031021210233124231023310212122330002312033124331003310233122121022310203120330000302212102231101212223102231012310033120331223200212020330003012230020310200302223120031040302212100331223311123100231222312012102331102310033121031022310033100330040301032100331220012212123030031210403004331203312203100331223310033102331043210403102121222210232002031023312033120321200000432102331023310223102121223312223100230023310033002331222312033122121043300232020321003311023120231203301123124331022310033104331021210422100321223300312102331040300233124331203301012120331003312223124331222200212102230002310223104321023311023111221243310033122331112300212120220043312033100331022310223111210003212433004231022310203102321221210233104321022310433122231002212312102221211212423104121023300031000331203100303100320030310023121231002212220002301003312212102231223310033101210212310032000320223210233100220023310203102221003102123110231243210303100331013011123102321002212232122231021210422002220203312232102331222202002004231010300223124331021210232102231203310230102231100302032102331041210430004231221212232003031021210223102221241210022002210030300403102031212312232102100023312223103031230310233104230003210033101210212210223104121022302233120331223200230";

my $pre_sum = sum( $pre );
my $rep_sum = sum( $repeat );

say "pre_height = $pre_sum, rep_height = $rep_sum";

my $target = 1000000000000;
my $h = $pre_sum;
my $r = length $pre;

my $rep_count = int( ( $target - $r ) / length $repeat );

say "we fit $rep_count repetitions";

$r += $rep_count * length $repeat;
$h += $rep_count * $rep_sum;

my $remaining = $target - $r;

for ( my $i = 0; $i < $remaining; $i++ ) {
	$r++;
	$h += substr $repeat, $i, 1;
}

say "we dropped $r rocks and ended up with height $h";

sub sum {
	my ( $s ) = @_;
	my $sum = 0;
	$sum += $_ foreach split '', $s;
	return $sum;
}